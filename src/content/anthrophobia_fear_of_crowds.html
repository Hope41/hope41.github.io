<!DOCTYPE html>
<html lang = en-gb>
    <head>
        <meta charset = utf-8>
        <meta name = viewport content = 'width = device-width, initial-scale = 1'>
        <meta name = description content = 'Free online coding blogs and open source games'>

        <script async src = 'https://www.googletagmanager.com/gtag/js?id=G-2MDQ9F697V'></script>
        <script src = /src/js/analytics.js></script>
        <script src = /src/js/main.js></script>
        <title>Procedural Crowd Simulation | Joachim Ford</title>
        <link rel = stylesheet href = /src/main.css>
        <link rel = icon type = image/x-icon  href = /src/favs/favicon.ico>
    </head>

    <body>
        <section class = topnav>
            <div class = title>
                <a class = brand href = '/'>Joachim Ford</a>
                <a class = about href = /about>About</a>
            </div>
            <div class = nav>
                <a href = /games>Games</a>
                <a href = /projects>Projects</a>
                <a href = /blogs>Blogs</a>
                <a href = /news>News</a>
            </div>
        </section>

        <section class = main>
            <span class = date>15.01.2022</span>
            <h1>Procedural Crowd Simulation</h1>

            <div class = big>
                <a href = /anthrophobia target = _blank>
                    <img class = img src = /src/images/anthrophobia_fear_of_crowds_big.png>
                    <div class = play><img src = /src/images/play.svg></div>
                </a>
            </div>

            <div class = demo>
                <p><b>It all began when I made a <a class = normal href = https://www.dwitter.net/d/24669 target = _blank>dweet</a>
                on the last day of 2021. It had potential, and it turned out that both this and my game
                <a class = normal href = /src/content/snakes_and_ladders target = _blank>
                Snakes And Ladders</a> were inspired from it.</b></p>
                <p><a class = button href = https://github.com/Hope41/anthrophobia target = _blank>Check Out the Source Code</a></p>
            </div>

            <div class = demo>
                <p>Making procedural creatures like these is pretty simple.
                The idea is to generate a template "box-man" and then
                apply randomness to it's colour, body height, arm length, leg length,
                eye distance, eye size ect...,
                and then to move each figure in a random direction, stop at intervals,
                blink, and move its eyes.</p>

                <p>I think the most notable part of this experiment is the way some of
                these creatures walk. This function is based on a circular movement
                that is restricted underneath to create a simple walking motion. Quite a handy
                trick for when you need it.</p>
            </div>
            <iframe src = /src/content/extra/anthrophobia_fear_of_crowds/1.html></iframe>

            <div class = demo>
<pre class = code>#const yDrop = cvs.height / 5

#for (let i = 2; i --;) {
    const x = cvs.width / 2 - Math.sin(time + i * Math.PI) * cvs.height / 4 - 10
    let y = cvs.height / 2 + Math.cos(time + i * Math.PI) * cvs.height / 4 - 10

    #if (y > cvs.height / 2) y = cvs.height / 2
    #y += yDrop

    const swing = Math.sin(time + i * Math.PI)
    #let rise = swing
    #if (rise < 0) rise = 0
    #y -= rise * 40</pre>

                <p>Of course, the manner of this walk can be changed by stretching its
                movement or by giving it more characteristic bops and drags. The example
                below really shows how loose you can be with the whole thing.</p>
            </div>

            <iframe src = /src/content/extra/anthrophobia_fear_of_crowds/2.html></iframe>

            <div class = demo>
<pre class = code>#for (let i = 2; i --;) {
    const x = -Math.sin(time + i * Math.PI + Math.sin(time + i * Math.PI + 2) * .3) * 100
    let y = 30 + Math.cos(time + i * Math.PI + Math.sin(time + i * Math.PI + 2)) * 130

    #if (y > 0) y = 0

    const swing = Math.sin(time + i * Math.PI + Math.sin(time + i * Math.PI + 3.1)) * 1.3
    #let rise = swing
    #if (rise < 0) rise = 0
    #y -= rise * 40</pre>

                <p>In the above example I tried to make the walk a bit comical,
                so you'd probably want to tweak it based on
                what your using it for, as human and animal walks are usually
                less extreme. For a larger implementation, see
                <a class = normal href = /src/blogs/create_and_animate_enemies_using_shapes>
                this article</a>.</p>

                <p>I hope you found this page as helpful as I found it fun. Please
                <a class = normal href = mailto:contactme@joachimford.uk>contact me</a>
                if you have any more ideas for experiments!</p>
            </div>
            <div id = pop>
                <div id = popMain>
                    <p>All comments are reviewed before being posted. No contact details
                    or other personal information will be shared.</p>
                    <p>If there's anything else you don't want published, please say
                    so in the comment.</p>
                    <p>Thanks for your feedback!</p>

                    <button id = okay>Okay</button>
                </div>
            </div>

            <div class = demo>
                <span id = commentContainer><form id = form action = https://api.web3forms.com/submit method = POST>
                    Leave a comment
                    <input type = hidden name = access_key value = 'bec85640-a8df-41e3-9112-826db534219c'>
                    <input type = hidden name = subject value = 'Someone posted a comment!'>
                    <input type = hidden name = address value = 3_tips_for_game_development>
                    <input type = text name = name placeholder = 'Anonymous'>
                    <div class = cont>
                        <textarea type = text name = message placeholder = 'Enter a message' required></textarea>
                        <button class = button id = info><img src = /src/images/info.svg></button>
                    </div>
                    <div class = h-captcha data-captcha = true id = captcha></div>
                    <button type = submit class = button onmousedown = pressPost()>Post</button>
                </form>

                <script src = https://web3forms.com/client/script.js async defer></script>
                <div id = thanks><h3>Thanks!</h3></div></span>
            </div>
        </section>

        <button class = theme onclick = toggleTheme()>Change Theme</button>
        <span class = copyright>
            &copy; <span class = year></span> Joachim Ford. All rights reserved.
            <a href = https://github.com/Hope41 target = _blank><img src = /src/images/github.svg></a>
            <a href = mailto:hello@joachimford.uk><img src = /src/images/mail.svg></a>
        </span>
    </body>
</html>